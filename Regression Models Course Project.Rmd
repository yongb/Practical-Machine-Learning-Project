---
output: html_document
---
Regression Models Course Project# Header 1 
========================================================

Executive Summary

A data set of a collection of cars will be explored to study the relationship between a set of variables and miles per gallon (MPG) (outcome). Particularly the following two questions will be addressed:

"Is an automatic or manual transmission better for MPG"

"Quantifying how different is the MPG between automatic and manual transmissions?"

In summary, the results indicated that cars with a manual transmission have a slightly better than automatic for MPG, but this different is statistical insignificant.


Exploration of the data set 
```{r}
#load the data set
library (datasets)
data(mtcars)
#summary the data set
str(mtcars)
```

The mtcars is a data frame with 32 observations on 11 variables. And the variable of mtcars$cyl, mtcars$vs, mtcars$gear, mtcars$carb, and mtcars$am should be category variables. Before regression analysis, the characteristics of these variables should be changed from num to factor.

```{r}
mtcars$cyl <- as.factor(mtcars$cyl)
mtcars$gear <- as.factor(mtcars$gear)
mtcars$vs <- as.factor(mtcars$vs)
mtcars$carb <- as.factor(mtcars$carb)
mtcars$am <- as.factor(mtcars$am)
levels(mtcars$am) <- c("Automatic", "Manual")
```


Regression Analysis  

```{r}
#fit all variables in the regression model with mpg as the response variable
all <- lm(mpg ~ ., data = mtcars)
```

The summary statistics and best model fitting (see Appendix) suggested that the best model includes the cyl6, cyl8, hp, wt, and amManual variables. The adjusted R-squared indicated that about 84% of the variance is explained by the final model. Moreover, the output of this model suggests that mpg decreases with respect to cylinders -3.03 and -2.16 for cyl6 and cyl8, respectively, horsepower -0.03, and weight for every 1,000lb, by -2.5. On the other hand, mpg increases with respect to having a manual transmission by 1.8. 



Visulization of relationship between Number of cylinders and Miles per gallon
```{r fig.width=7, fig.height=6}
boxplot(mpg ~ cyl, data = mtcars, col = (c("red","blue","yellow")), ylab = "Miles Per Gallon", xlab = "Number of cylinders")
```



Visulization of relationship between Transmission type and Miles per gallon
```{r fig.width=7, fig.height=6}
boxplot(mpg ~ am, data = mtcars, col = (c("red","blue")), ylab = "Miles Per Gallon", xlab = "Transmission Type")
```



Hypothesis test
```{r fig.width=7, fig.height=6}
t.test(mpg ~ am, data = mtcars)
```

Based on the t-test, we reject the null hypothesis that the mpg distributions for manual and automatic transmissions are the same.




Conclusions  
Based on the analysis done in this project, we can conclude that:
- Manual transmission increases 1.8 more miles per gallon compared to Automatic transmission in cars. 
- MPG decreases by 2.5 for every 1000 lb increase in car weight.
- MPG decreases 0.03 with every increase of every unit of hp.
- If number of cylinders, cyl increases from 4 to 6 and 8, mpg will decrease by a factor of 3 and 2.2 respectively.



Appendix  

Summary of full model with all variables fitted 
```{r}
summary(all)
```

Summary of best model
```{r}
#determine the best fit model uisng step-wise backward method
best <- step(all, direction = "backward")
summary(best)
```

Model Residuals and Diagnostics
```{r}
par(mfrow=c(2, 2))
plot(best)
```
